diff --git a/src/funcs.c b/src/funcs.c
index f190349..5aeb67c 100644
--- a/src/funcs.c
+++ b/src/funcs.c
@@ -291,7 +291,7 @@ simple:
 protected int
 file_reset(struct magic_set *ms)
 {
-	if (ms->mlist[0] == NULL) {
+	if (ms->mlist == NULL) {
 		file_error(ms, 0, "no magic files loaded");
 		return -1;
 	}
diff --git a/src/softmagic.c b/src/softmagic.c
index c20ae67..dc58e0b 100644
--- a/src/softmagic.c
+++ b/src/softmagic.c
@@ -75,6 +75,8 @@ file_softmagic(struct magic_set *ms, const unsigned char *buf, size_t nbytes,
 {
 	struct mlist *ml;
 	int rv, printed_something = 0, need_separator = 0;
+	if (!ms->mlist[0])
+		return 0;
 	uint16_t nc;
 
 	if (name_count == NULL) {
